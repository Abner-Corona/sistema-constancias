<div
  class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100"
>
  <div class="w-full max-w-md p-6">
    <p-card class="shadow-xl">
      <ng-template pTemplate="header">
        <div class="text-center py-6">
          <img
            src="/images/morelos_logo.svg"
            alt="Logo oficial del Gobierno del Estado de Morelos"
            class="mx-auto mb-4 w-24 h-auto"
          />
          <h2 class="text-2xl font-bold text-gray-900 mb-2">
            Sistema de Firmado Electrónico de Certificados
          </h2>
          <p class="text-gray-600">Iniciar sesión</p>
        </div>
      </ng-template>

      <form class="space-y-6">
        <div>
          <label for="usuario" class="block text-sm font-medium text-gray-700 mb-2">
            Usuario
          </label>
          <input
            pInputText
            id="usuario"
            [(ngModel)]="usuario"
            name="usuario"
            placeholder="Ingrese su usuario"
            class="w-full"
            [class.ng-invalid]="!usuario() && errorMessage()"
          />
        </div>

        <div>
          <label for="password" class="block text-sm font-medium text-gray-700 mb-2">
            Contraseña
          </label>
          <div class="relative">
            <p-password
              [(ngModel)]="password"
              name="password"
              placeholder="Ingrese su contraseña"
              [toggleMask]="true"
              [feedback]="false"
              styleClass="w-full"
              inputStyleClass="w-full pr-10"
            ></p-password>
          </div>
        </div>

        @if (errorMessage()) {
        <p-message severity="error" [text]="errorMessage()!"></p-message>
        }

        <p-button
          type="button"
          label="Iniciar sesión"
          [loading]="loading()"
          [disabled]="!usuario() || !password()"
          (onClick)="logIn()"
          styleClass="w-full bg-blue-600 hover:bg-blue-700 border-blue-600"
        ></p-button>
      </form>

      <ng-template pTemplate="footer">
        <div class="text-center text-sm text-gray-500 mt-6">
          © 2025 Sistema de Constancias - Morelos
        </div>
      </ng-template>
    </p-card>
  </div>
</div>

<!-- Loading Overlay -->
@if (loading()) {
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white p-6 rounded-lg shadow-xl flex items-center space-x-4">
    <p-progressSpinner [style]="{ width: '40px', height: '40px' }"></p-progressSpinner>
    <span class="text-gray-700">Verificando credenciales...</span>
  </div>
</div>
}
