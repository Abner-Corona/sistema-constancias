/* Estilos personalizados para el componente de autocompletado de usuarios */

/*
	Objetivo: evitar que el autocompletado en modo `multiple` aumente la altura
	del formulario cuando se seleccionan muchas etiquetas. Mantener la altura
	consistente con otros inputs y permitir scroll horizontal de los tokens.

	Notas: usamos `::ng-deep` para apuntar a la estructura interna del componente
	de PrimeNG (p-autocomplete). Esto aplica estilos sólo dentro de este
	componente standalone.
*/

:host {
  display: block;
}

/* Use Tailwind on the host/template (w-full, h-10, px-2). Keep only small
   overrides for PrimeNG internals — align and scrolling behaviour. */
:host ::ng-deep .p-autocomplete-multiple-container,
:host ::ng-deep .p-autocomplete-input-multiple {
  /* inherit the height set on the p-autocomplete element (Tailwind h-10) */
  height: 100%;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  /* padding comes from the p-autocomplete element (px-2 Tailwind)
     avoid redundant paddings here so we're consistent */
  flex-wrap: nowrap; /* evita el salto a varias líneas */
  overflow-x: auto; /* permite scroll horizontal de tokens */
  overflow-y: hidden;
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(0, 0, 0, 0.28) transparent;
}

/* Asegura que cada token se muestre en línea, centrado y sin romper la altura */
:host ::ng-deep .p-autocomplete-token,
:host ::ng-deep .p-autocomplete-chip-item,
:host ::ng-deep .p-autocomplete-chip {
  display: inline-flex;
  align-items: center;
  max-height: 32px;
  white-space: nowrap;
  margin-right: 0.25rem;
  flex-shrink: 0; /* evitar que los chips se reduzcan y causen reflow vertical */
}

/* Forzamos el alto del input interno para que sea consistente con el resto */
/* Afectar ambos tipos de input que PrimeNG puede renderizar */
/* Let the outer container (p-autocomplete) set height with Tailwind. Make
   inner input take full height and centralize caret/placeholder. */
:host ::ng-deep .p-autocomplete input.p-inputtext,
:host ::ng-deep .p-autocomplete .p-autocomplete-input,
:host ::ng-deep .p-autocomplete .p-autocomplete-input-multiple input.p-autocomplete-input {
  height: 100%;
  line-height: normal;
  box-sizing: border-box;
  padding-top: 0; /* vertical padding handled by the component's height */
  padding-bottom: 0;
}

/* Asegurar que el li que contiene el input dentro de la lista multiple se comporte en línea */
:host ::ng-deep .p-autocomplete-input-multiple > li.p-autocomplete-input-chip {
  display: inline-flex;
  align-items: center;
  min-width: 40px;
  /* Allow the input wrapper li to take remaining space so placeholder is visible */
  flex: 1 1 auto;
}

/* Input dentro del estado múltiple: no debe forzar mayor altura, y debe poder encogerse */

:host ::ng-deep .p-autocomplete-input-multiple input.p-autocomplete-input {
  /* Placeholder/caret: ensure visibility and avoid vertical clipping */
  height: 100%;
  line-height: normal;
  padding: 0 0.5rem; /* left/right padding to keep placeholder readable */
  box-sizing: border-box;
  min-width: 120px; /* suficiente para que el placeholder no se corte */
  /* expand to fill the li wrapper and show placeholder/caret */
  flex: 1 1 auto;
  width: 100%;
}

/* Resaltar el input cuando está enfocado para ver el caret y la posición */
:host ::ng-deep .p-autocomplete-input-multiple input.p-autocomplete-input:focus {
  /* Remove colored focus highlight — keep interaction accessible but neutral */
  outline: none;
  box-shadow: none;
  border-radius: 0;
}

/* Prevenir que el contenido interno provoque salto vertical al crecer la fuente */
:host ::ng-deep .p-autocomplete-multiple-container .p-chip,
:host ::ng-deep .p-autocomplete-input-multiple .p-chip {
  max-height: 34px;
  overflow: hidden;
}

/* Opcional: mejorar la visibilidad del scroll horizontal en algunos navegadores */
:host ::ng-deep .p-autocomplete-multiple-container::-webkit-scrollbar {
  height: 6px;
}
:host ::ng-deep .p-autocomplete-multiple-container::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 9999px;
}

/* Visibilidad del scroll para el selector alternativo */
:host ::ng-deep .p-autocomplete-input-multiple::-webkit-scrollbar {
  height: 6px;
}
:host ::ng-deep .p-autocomplete-input-multiple::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.28);
  border-radius: 9999px;
  transition: background-color 150ms ease-in-out;
}

:host ::ng-deep .p-autocomplete-input-multiple:hover::-webkit-scrollbar-thumb,
:host ::ng-deep .p-autocomplete-input-multiple:focus-within::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.42);
}

/* Ajustar el relleno de los chips para dar más espacio al input */
:host ::ng-deep .p-autocomplete-chip-label,
:host ::ng-deep .p-autocomplete-token .p-chip-label,
:host ::ng-deep .p-autocomplete-chip .p-chip-label {
  padding-right: 0.4rem;
  padding-left: 0.4rem;
}
