/* Estilos específicos para el componente editor-constancias */

/* Área del editor y panel de etiquetas ya tienen clases Tailwind en HTML */

/* Orden: tags a la izquierda, editor a la derecha */
.tags-panel {
  order: 0;
}
.editor-area {
  order: 1;
}

/* Visual style for the paper preview inside the editor */
.paper {
  /* Estilo visual de la hoja (Letter por defecto) */
  background: var(--surface-0, #ffffff);
  border: 1px solid rgba(0, 0, 0, 0.08);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
  border-radius: 4px;
  overflow: hidden;
  display: block;

  /* Variables físicas de tamaño hoja (Letter 8.5 x 11in -> 21.59cm x 27.94cm)
     Usamos min/max para que la hoja se escale proporcionalmente y nunca se deforme
     en contenedores más pequeños o más altos (mejor para vista vertical/portrait). */
  --paper-w: 21.59cm; /* 8.5in */
  --paper-h: 27.94cm; /* 11in */
  aspect-ratio: 8.5 / 11; /* ancho / alto para portrait */

  /* Escala responsiva: intenta usar el tamaño real, pero nunca sobrepase el
     contenedor ni la ventana gráfica. */
  width: min(var(--paper-w), calc(100% - 4rem));
  max-height: min(var(--paper-h), calc(100% - 8rem));
}

/* Landscape switches width and aspect ratio */
.paper.landscape {
  /* Landscape: proporciones reales (11in x 8.5in) y comportamiento responsivo.
    Prioriza el ancho cuando hay espacio horizontal; cuando la altura del
    viewport es limitada, respeta max-height para que no se «achate». */
  aspect-ratio: 11 / 8.5;

  /* Usamos límites físicos + contenedores para evitar deformaciones */
  --paper-land-w: 27.94cm; /* 11in */
  --paper-land-h: 21.59cm; /* 8.5in */

  /* El ancho intentará usar el espacio máximo disponible (hasta el ancho físico).
    No usamos width fijo para dejar que aspect-ratio calcule la altura. */
  max-width: min(var(--paper-land-w), calc(100% - 4rem));
  width: 100%;

  /* Limita la altura para que quepa en ventanas con poco alto (ej. ventanas apiladas)
    y evita que se reduzca demasiado el alto del papel */
  max-height: min(var(--paper-land-h), calc(100vh - 8rem));

  /* Céntralo y dale espacio para que se muestre claramente como hoja horizontal */
  margin-inline: auto;
}

/* Portrait: en contenedores altos y estrechos priorizamos la altura real
   para que la hoja se vea con proporciones reales y no "achatada". */
.paper.portrait {
  /* Prioriza la altura física, y ajusta el ancho proporcionalmente */
  height: min(var(--paper-h), calc(100vh - 8rem));
  width: auto;
  max-width: calc(100% - 4rem);
}

/* Wrapper centers the sheet inside the editor and provides padding/scrolling */
.paper-wrapper {
  background: transparent;
}

/* .paper-inner removed: its responsibilities moved to .paper
   (padding / sizing now handled on the .paper element and the canvas) */

.editor-canvas {
  /* The canvas inside the paper where elements are positioned */
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  print-color-adjust: exact;
  -webkit-print-color-adjust: exact; /* improve print color fidelity */
  /* Aseguramos que el lienzo se centre y mantenga proporciones internas */
  display: flex;
  align-items: stretch;
  justify-content: stretch;
}

/* Móvil: apilar columnas */
@media (max-width: 640px) {
  .tags-panel {
    width: 100% !important;
  }
  .editor-area {
    min-height: 40vh;
  }
}

/* Mejor comportamiento para impresión y export a PDF: usar tamaño físico exacto */
@media print {
  .paper {
    margin: 0 auto;
    width: var(--paper-w);
    height: var(--paper-h);
    box-shadow: none;
    border: 0.5px solid rgba(0, 0, 0, 0.2);
  }
  /* Eliminamos overflow innecesario al imprimir */
  .paper-wrapper,
  .editor-area,
  .p-dialog .p-dialog-content {
    overflow: visible !important;
  }
}
